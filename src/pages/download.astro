---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Download RegParity | Request Access">
  <div class="wrap page-content">
    <div class="form-container" id="request">
      <h1>Request RegParity</h1>
      <p>Share your work email and we’ll send an expiring download link, along with a short getting-started guide.</p>

      <div id="success-banner" class="success-banner" style="display: none;">
        <strong>Request sent</strong> — we’ll be in touch shortly.
      </div>

      <form action="/api/request" method="POST">
        <label for="name">Name</label>
        <input type="text" id="name" name="name" />

        <label for="company">Company</label>
        <input type="text" id="company" name="company" />

        <label for="email">Work Email *</label>
        <input type="email" id="email" name="email" required />

        <label for="it-email">IT Contact Email (optional)</label>
        <input type="email" id="it-email" name="it_email" />

        <label for="message">Message (optional)</label>
        <textarea id="message" name="message" rows="4"></textarea>

        <button type="submit" class="btn primary full-width">Request download link</button>
      </form>

      <p class="note">Note: If your IT team needs to download and scan the application first, we can send the link directly to them.</p>
    </div>
  </div>
</BaseLayout>

<script>
  // Check for 'sent=1' in query parameters to show success message
  const params = new URLSearchParams(window.location.search);
  if (params.get('sent') === '1') {
    const banner = document.getElementById('success-banner');
    if (banner) {
      banner.style.display = 'block';
    }
  }
</script>

<style>
  .page-content {
    padding: 80px 22px;
    display: flex;
    justify-content: center;
  }
  .form-container {
    width: 100%;
    max-width: 520px;
  }
  h1 {
    font-size: 2.5rem;
    margin-bottom: 16px;
    color: var(--rpText);
  }
  p {
    color: var(--rpTextMuted);
    margin-bottom: 32px;
    line-height: 1.6;
  }
  .note {
    font-size: 0.85rem;
    margin-top: 24px;
    opacity: 0.7;
  }
  .full-width {
    width: 100%;
    margin-top: 16px;
  }
  .success-banner {
    background: #F0FDF4; /* Light green background */
    border: 1px solid var(--rpSuccess);
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 24px;
    color: var(--rpSuccess);
    font-size: 0.95rem;
  }
  .success-banner strong {
    font-weight: 600;
  }
</style>
